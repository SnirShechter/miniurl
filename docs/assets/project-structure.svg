<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="811px" height="301px" viewBox="-0.5 -0.5 811 301" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-01-29T12:33:22.782Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.104 Safari/537.36&quot; etag=&quot;INLsPzeG1Qv6Dc8CtvsO&quot; version=&quot;14.2.7&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;WsVmaz3JRyypXk_u3b5w&quot; name=&quot;Page-1&quot;&gt;7VpbU9s6EP41mdIHGNu5FB5JKG1nyrmQcs6zYiu2prLkI8u58OvPriQncRInoYTUMDwQzEqW9qbv21VotQfp7IsiWXInI8pbgRfNWu2bVhBcdT34RMHcCjrtrhXEikVW5C8FQ/ZIndC9FxcsonllopaSa5ZVhaEUgoa6IiNKyWl12ljy6q4ZiemGYBgSvin9l0U6sdLL0iyUf6UsTsqdfc+NpKSc7AR5QiI5XRG1P7faAyWltk/pbEA5+q70i33vtmZ0oZiiQh/yQnckou/z/t8PV0PSGWaPf05S/7xjV5kQXjiDnbJ6XnogVrLINjdz+0+o0nS2LRRkVK6wtBayhMqUajWHee6tdts5yGVIz/05Xbo7KJ2arLq644TEhTheLL30Ajw4RzzBKf4Wp/Q4bNsfwUOMD3eECZhyxkREZxc6/1jOgA0XkzZcCZ6E+bi1B8PThGk6zEiIo1M4PSBLdAqq3vjwyMmI8r9kzjSTAmQhuJ4qGECXM8jQ72sTUhZFuFOfcBZvfePaDWiZLdRbjenOFFkPdG1A/e5GAP3L7ikDGNQGsOCViPT+K/D49cdS6PPcgM81TPC9bGYcVI4vI2qX4ewoy+QZEc9aqA/okWtMncC7JblmY4wDjJIUI2w/QQKJpwFFlzlqd65qA2K0q5mWfqHaQsuYxa/ZjoGiRFNMevgRdAqfQy0VshAktcg1EYAHpzdwqInSZoVSmZBTIhD5QS2AEThMJ9kfdgLM2rUTCPEY12AsgJSuAikcEPmTDiSXgIU3QgrEyDHjfE1UwianY10LmttAuwrrv47b6CtXAfmeTbaQiditm0jFHmEGKe06On7PS7bdxO+rbQQcvBR+d39/VdJbq0q2eeXEZUlvf1kyWMfHN1aLdGvC2+Ba5NMxapFjFCI7KbVQxEQOOiQlU/hFxYQpKVKMB2qvGJ6cHGtewMzAkzpBmPZyWaiQVurfZ3HDhpb/QAZFljKZfrFd/pAqhY0ey228M3oRX2CzWSj0yodP2MOSef7BNKDY3wGBsJyC+6I91r/z1ZP46vAz3hi+uvz9fNVpHl9d7eer+/W+5I3x1WVNeBvMV+XFWwMJq9qEWVlOJvRBoWLn8BMbSsPWiksAosArcGiAHTB1SI6DOWCTLkd3tlojdezma8MqRSOm4KT/kEs7Stm6rpZ6Vm07oZpaMbrpbCbGyJ2ueiAjONHbvOydTaFgQHqNpCkjDMtCiwm5ePvOn0fkz8MxpzH86W+7cT0xgYJqTSNQv/4ec8GTi8ujt0qhfl2Em8yh7VfFodcWufEiOXQ4zsnctHeGb5BjTfujEdbHpv+D9g9dnEhOTTMUKolXd2zv5eUJqGqbjd80kk5qv7YZF8IYiiJiSMmaY5lqcP9wgx1uRm1T/NL35gfpnxCjf4HffBqXR4rBkTAN+TdxR1OJeYuVzj3lRm28r/WoDi8+mkCxMEHLDe2uLgNBHZF875cDB4btnaufxNVPALfmkHUDbmeDxjW7/gG3s9cFKPd2ifoVXs76zb2drSdqyCKEm7LlWtAu+BHzaxXd8zCh6bGw/TnW7KKvPslZ6AyzFNankGy2/PhJxSE0tu4USI9ERvmL2TMoFB4Hjtlc5HBUXalU6mF0ilJTbWx8+f5Om8+lzUbdEcOfy//iMmMr/wrX/vw/&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="325" y="0" width="185" height="140" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 7px; margin-left: 326px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Main (index.ts)</b></div></div></div></foreignObject><text x="418" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Main (index.ts)</text></switch></g><rect x="310" y="20" width="190" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 1px; padding-top: 25px; margin-left: 310px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul style="font-size: 10px"><li style="font-size: 10px"><span style="font-size: 10px">Bootstrap Fastify &amp; routes</span></li><li style="font-size: 10px"><span style="font-size: 10px">Get config</span></li><li style="font-size: 10px"><span style="font-size: 10px">Create a new Storage instance</span></li><li style="font-size: 10px">Start storage cleanup interval</li><li style="font-size: 10px">Start server</li></ul></div></div></div></foreignObject><text x="310" y="35" fill="#000000" font-family="Helvetica" font-size="10px">Bootstrap Fastify &amp; routesGet configCr...</text></switch></g><rect x="625" y="160" width="185" height="140" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 167px; margin-left: 626px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Config</b></div></div></div></foreignObject><text x="718" y="179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Config</text></switch></g><rect x="610" y="180" width="190" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 1px; padding-top: 185px; margin-left: 610px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul style="font-size: 10px"><li style="font-size: 10px">Get configuration from environment variables (or other sources)</li><li style="font-size: 10px">Validate it</li><li style="font-size: 10px">Normalize it (e.g. turn '7 days' to milliseconds)</li></ul></div></div></div></foreignObject><text x="610" y="195" fill="#000000" font-family="Helvetica" font-size="10px">Get configuration from environment var...</text></switch></g><rect x="425" y="160" width="185" height="140" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 167px; margin-left: 426px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Routes</b></div></div></div></foreignObject><text x="518" y="179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Routes</text></switch></g><rect x="410" y="180" width="190" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 1px; padding-top: 185px; margin-left: 410px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul style="font-size: 10px"><li style="font-size: 10px"><span>saveUrl - get a long url, return a short url</span><br /></li><li style="font-size: 10px">redirectToUrl - redirect short url to long url<br /></li><li style="font-size: 10px">retrieveUrl - get information about a short url (where does it lead?)</li></ul></div></div></div></foreignObject><text x="410" y="195" fill="#000000" font-family="Helvetica" font-size="10px">saveUrl - get a long url, return a sho...</text></switch></g><rect x="220" y="160" width="185" height="140" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 167px; margin-left: 221px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Storage</b></div></div></div></foreignObject><text x="313" y="179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Storage</text></switch></g><rect x="205" y="180" width="190" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 1px; padding-top: 185px; margin-left: 205px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul style="font-size: 10px"><li style="font-size: 10px"><span>An abstraction layer to save data for the whole microservice</span><br /></li><li style="font-size: 10px"><span>Its main functions are the url CRUD operations</span></li><li style="font-size: 10px"><span>has multiple drivers (InMemory, Postgres etc.) which fit multiple databases</span><br /></li></ul></div></div></div></foreignObject><text x="205" y="195" fill="#000000" font-family="Helvetica" font-size="10px">An abstraction layer to save data for...</text></switch></g><rect x="15" y="160" width="185" height="140" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 167px; margin-left: 16px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Auth</b></div></div></div></foreignObject><text x="108" y="179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Auth</text></switch></g><rect x="0" y="180" width="190" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 1px; padding-top: 185px; margin-left: 0px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul style="font-size: 10px"><li style="font-size: 10px"><span>An authorization service with multiple schemes</span><br /></li><li style="font-size: 10px">has multiple drivers (Basic auth, Bearer token etc.) which fit multiple authorization methods</li><li style="font-size: 10px">Currently used to authorize admin routes</li></ul></div></div></div></foreignObject><text x="0" y="195" fill="#000000" font-family="Helvetica" font-size="10px">An authorization service with multiple...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>